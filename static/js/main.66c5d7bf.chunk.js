(this["webpackJsonpfood-app"]=this["webpackJsonpfood-app"]||[]).push([[0],{43:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(2),a=c.n(r),i=c(28),s=c.n(i),o=c(7),j=c(13),d=c(5),l=function(){return Object(n.jsx)("h1",{children:"Inicio de sesi\xf3n"})},u="/productos",b="/productos/crear",O="/productos/:productId",h="/iniciar-sesion",m="/error",p=function(e){var t=e.title,c=e.hideButtonCreate,r=void 0!==c&&c;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"title-section",children:[Object(n.jsx)("h1",{children:t||"Lista de productos"}),!r&&Object(n.jsxs)(j.b,{to:b,children:[Object(n.jsx)("span",{children:"+"})," Crear Producto"]})]}),Object(n.jsx)("hr",{className:"my-2"})]})},x=c(16),f=c.n(x),g=c(3),v=c(20),N=Object(r.createContext)([]),S=N.Provider,y=N,C=c(26);c(40);C.a.initializeApp({apiKey:"AIzaSyDpF1485ykFJf8D55s4OSvu9iQwDYHAzus",authDomain:"food-aap-830c9.firebaseapp.com",projectId:"food-aap-830c9",storageBucket:"food-aap-830c9.appspot.com",messagingSenderId:"1085004078245",appId:"1:1085004078245:web:bd6d1172b03f47e100c14c"});var w=C.a.firestore(),F=w.collection("products"),I=w.collection("comments"),k={id:null,name:"",description:"",price:null},E=c.p+"static/media/default2.fda7413f.png",L=c(19),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(e),c=Object(o.a)(t,2),n=c[0],a=c[1],i=function(){a(e)},s=function(e){var t=e.target;a(Object(g.a)(Object(g.a)({},n),{},Object(L.a)({},t.name,t.value)))};return[n,s,i]},M=function(e){var t=e.children,c=e.isLoading,r=void 0===c||c;return Object(n.jsx)(n.Fragment,{children:r?Object(n.jsxs)("div",{className:"lds-ring",children:[Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{}),Object(n.jsx)("div",{})]}):Object(n.jsx)(n.Fragment,{children:t})})},A=function(){var e=function(){var e=Object(r.useContext)(y).setStateModal,t=Object(d.g)(),c=Object(r.useState)({action:function(c){F.add(c).then((function(c){c.set({id:c.id},{merge:!0}).then((function(){i(Object(g.a)(Object(g.a)({},a),{},{loading:!1,error:null})),e({title:"Producto creado",desc:"Se ha creado el proucto",isShow:!0}),t.push(u)}))})).catch((function(){i(Object(g.a)(Object(g.a)({},a),{},{loading:!1,error:"Ocurrio un error"}))}))},loading:!1,error:null}),n=Object(o.a)(c,2),a=n[0],i=n[1];return a}(),t=e.loading,c=e.action,a=D({name:"",description:"",price:0}),i=Object(o.a)(a,2),s=i[0],j=i[1],l=s.name,b=s.description,O=s.price;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p,{title:"Crear Producto",hideButtonCreate:!1}),Object(n.jsxs)("form",{className:"create-section",onSubmit:function(e){e.preventDefault(),c({description:b,name:l,price:O})},children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{className:"img-fluid",src:E,alt:"default"})}),Object(n.jsxs)("div",{className:"ml-17 mb-1 form-group",children:[Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("label",{htmlFor:"name",children:"Nombre"}),Object(n.jsx)("input",{autoComplete:"off",name:"name",type:"text",placeholder:"ingrese el nombre",value:l,onChange:j})]}),Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("label",{htmlFor:"description",children:"Descripci\xf3n"}),Object(n.jsx)("input",{autoComplete:"off",name:"description",type:"text",placeholder:"ingrese la descripci\xf3n",value:b,onChange:j})]}),Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("label",{htmlFor:"price",children:"Precio"}),Object(n.jsx)("input",{autoComplete:"off",name:"price",type:"number",pattern:"\\d*",placeholder:"ingrese el precio",value:O,onChange:j})]}),Object(n.jsx)(M,{isLoading:t,children:Object(n.jsx)("button",{type:"submit",children:"A\xf1adir"})})]})]})]})},B=function(e){var t=e.id,c=e.img,r=e.name,a=e.description,i=e.price;return Object(n.jsxs)("article",{className:"product-article",children:[Object(n.jsx)(j.b,{to:"".concat(u,"/").concat(t),children:Object(n.jsx)("img",{src:c||E,alt:r})}),Object(n.jsxs)("div",{className:"info",children:[Object(n.jsxs)("div",{className:"title",children:[Object(n.jsx)("h3",{children:r})," ",Object(n.jsx)("h3",{children:Object(n.jsx)("span",{children:"+"})})]}),Object(n.jsxs)("p",{children:["$",i]}),Object(n.jsx)("p",{children:a})]}),Object(n.jsx)("div",{className:"link",children:Object(n.jsx)(j.b,{to:"".concat(u,"/").concat(t),children:"Ver comentarios..."})})]},t)},P=function(e){var t=e.history,c=function(){var e=Object(r.useState)({data:[],loading:!0,error:null}),t=Object(o.a)(e,2),c=t[0],n=t[1],a=Object(r.useRef)(!0);return Object(r.useEffect)((function(){try{!function(){var e=Object(v.a)(f.a.mark((function e(){var t,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.get();case 2:t=e.sent,c=[],t.forEach((function(e){c.push(Object(g.a)({id:e.id},e.data()))})),a.current&&n({data:c,loading:!1,error:null});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}catch(e){n({data:null,loading:!1,error:e})}return function(){a.current=!1}}),[]),c}(),a=c.data,i=c.loading;return c.error&&t.push(m),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p,{}),Object(n.jsx)("div",{className:"content",children:Object(n.jsxs)(M,{isLoading:i,children:[a&&a.map((function(e){return Object(n.jsx)(B,Object(g.a)({},e),e.id)})),Object(n.jsx)("div",{className:"product-article",style:{height:"0px"}})]})})]})},z=c.p+"static/media/userIcon.18fcee80.png",J=function(e){var t=e.match.params.productId,c=function(e){var t=Object(r.useState)({data:k,loading:!0,error:null}),c=Object(o.a)(t,2),n=c[0],a=c[1],i=Object(r.useRef)(!0);return Object(r.useEffect)((function(){try{!function(){var t=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.where("id","==",e).get();case 2:t.sent.forEach((function(e){i.current&&a({data:e.data(),loading:!1,error:null})}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}catch(t){a({data:null,loading:!1,error:t})}return function(){i.current=!1}}),[]),n}(t),a=c.data,i=a.id,s=a.name,j=a.description,d=a.price,l=c.loading,u=function(e){var t=function(){try{var t=function(){var t=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.where("productId","==",e).get();case 2:t.sent.forEach((function(e){c.push(e.data())})),s.current&&i(Object(g.a)(Object(g.a)({},a),{},{data:c,loading:!1,error:null}));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),c=[];t()}catch(n){i(Object(g.a)(Object(g.a)({},a),{},{data:null,loading:!1,error:n}))}},c=Object(r.useState)({action:t,data:[],loading:!0,error:null}),n=Object(o.a)(c,2),a=n[0],i=n[1],s=Object(r.useRef)(!0);return Object(r.useEffect)((function(){return s.current=!0,t(),function(){s.current=!1}}),[]),a}(t),b=u.action,O=u.data,h=u.loading,m=function(){var e=Object(r.useState)({action:function(e){I.add(e).then((function(e){e.set({id:e.id},{merge:!0}).then((function(){n(Object(g.a)(Object(g.a)({},c),{},{loading:!1,error:null}))}))})).catch((function(){n(Object(g.a)(Object(g.a)({},c),{},{loading:!1,error:"Ocurrio un error"}))}))},loading:!1,error:null}),t=Object(o.a)(e,2),c=t[0],n=t[1];return c}(),x=m.action,N=m.loading,S=m.error,y=D({comment:""}),C=Object(o.a)(y,3),w=C[0],L=C[1],A=C[2],B=w.comment;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p,{title:s}),Object(n.jsx)("section",{className:"single-content",children:Object(n.jsxs)(M,{isLoading:l,children:[Object(n.jsx)("img",{src:E,alt:s}),Object(n.jsxs)("h4",{children:["$",d]}),Object(n.jsx)("p",{children:j})]})}),Object(n.jsx)("hr",{className:"my-2"}),Object(n.jsx)("h3",{className:"mb-1",children:"Escribe tu comentario"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x({author:"An\xf3nimo",comment:B,productId:i,rate:5}),S||(A(),b())},className:"comment-form",children:[Object(n.jsx)("textarea",{name:"comment",placeholder:"Escribe tu comentario...",autoComplete:"off",rows:"1",className:"comment",maxLength:"180",value:B,onChange:L}),Object(n.jsx)(M,{isLoading:N,children:Object(n.jsx)("button",{type:"submit",children:"Comentar"})})]}),Object(n.jsx)("section",{className:"comments",children:Object(n.jsx)(M,{isLoading:h,children:O&&O.map((function(e){var t=e.author,c=e.comment,r=e.id;return Object(n.jsxs)("div",{className:"comment my-2",children:[Object(n.jsxs)("div",{className:"profile text-center",children:[Object(n.jsx)("img",{className:"profile-img",src:z,alt:t}),Object(n.jsx)("h5",{children:t})]}),Object(n.jsx)("p",{children:c})]},r)}))})})]})},R=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("header",{className:"product-banner",children:Object(n.jsx)(j.b,{to:u,className:"product-title",children:"Valhalla Food"})}),Object(n.jsx)("hr",{}),Object(n.jsx)("section",{className:"product-section",children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{exact:!0,path:u,component:P}),Object(n.jsx)(d.b,{exact:!0,path:b,component:A}),Object(n.jsx)(d.b,{exact:!0,path:O,component:J})]})})]})},V=function(){return Object(n.jsx)(j.a,{children:Object(n.jsx)("div",{className:"main",children:Object(n.jsxs)(d.d,{children:[Object(n.jsx)(d.b,{path:u,component:R}),Object(n.jsx)(d.b,{path:h,component:l}),Object(n.jsx)(d.a,{to:u})]})})})},$=(c(43),function(){var e=Object(r.useContext)(y),t=e.stateModal,c=t.title,a=t.desc,i=t.isShow,s=e.setStateModal;return Object(n.jsx)(n.Fragment,{children:i&&Object(n.jsx)("div",{id:"generalModal",className:"modal",children:Object(n.jsxs)("div",{className:"modal-contenido",children:[Object(n.jsx)("p",{onClick:function(){return s({isShow:!1,title:"",desc:""})},children:"X"}),Object(n.jsx)(p,{title:c,hideButtonCreate:!0}),Object(n.jsx)("p",{children:a})]})})})}),H=function(){var e=Object(r.useState)({isShow:!1,title:"",desc:""}),t=Object(o.a)(e,2),c=t[0],a=t[1];return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(S,{value:{stateModal:c,setStateModal:a},children:[Object(n.jsx)(V,{}),Object(n.jsx)($,{})]})})};s.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(H,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.66c5d7bf.chunk.js.map